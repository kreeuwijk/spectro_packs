{{- if not (lookup "v1" "Namespace" "" .Values.storageCluster.namespace).kind }}
{{- if not (has .Values.storageCluster.namespace (list "capi-webhook-system" "cert-manager" "default" "kube-node-lease" "kube-public" "kube-system")) }}
apiVersion: v1
kind: Namespace
metadata:
  labels:
    kubernetes.io/metadata.name: {{ .Values.storageCluster.namespace }}
    pod-security.kubernetes.io/audit: privileged
    pod-security.kubernetes.io/enforce: privileged
    pod-security.kubernetes.io/enforce-version: latest
    pod-security.kubernetes.io/warn: privileged
  name: {{ .Values.storageCluster.namespace }}
{{- end }}
{{- end }}